// laboratorna_5.java
// Laboratory work #5 — Queue and Deque projects in Java

import java.util.Scanner;
import java.util.Random;

class Queue {
    private int maxSize;
    private int[] queArray;
    private int front;
    private int rear;

    public Queue(int s) {
        maxSize = s;
        queArray = new int[maxSize];
        front = 0;
        rear = -1;
    }

    public void insert(int j) {
        if (rear == maxSize - 1) {
            rear = -1; // циклічний перенос
        }
        queArray[++rear] = j;
    }

    public int remove() {
        int temp = queArray[front++];
        if (front == maxSize) {
            front = 0;
        }
        return temp;
    }

    public boolean isEmpty() {
        return ((rear + 1 == front) || (front + maxSize - 1 == rear));
    }

    public void clear() {
        front = 0;
        rear = -1;
    }

    public void show() {
        System.out.print("Queue contents: ");
        if (isEmpty()) {
            System.out.println("Queue is empty");
            return;
        }
        int i = front;
        while (true) {
            System.out.print(queArray[i] + " ");
            if (i == rear) break;
            i = (i + 1) % maxSize;
        }
        System.out.println();
    }
}

class Deque {
    private int maxSize;
    private int[] dequeArray;
    private int front;
    private int rear;

    public Deque(int s) {
        maxSize = s;
        dequeArray = new int[maxSize];
        front = 0;
        rear = -1;
    }

    public void insertRight(int j) {
        if (rear == maxSize - 1) rear = -1;
        dequeArray[++rear] = j;
    }

    public void insertLeft(int j) {
        if (front == 0) front = maxSize;
        dequeArray[--front] = j;
    }

    public int removeLeft() {
        int temp = dequeArray[front++];
        if (front == maxSize) front = 0;
        return temp;
    }

    public int removeRight() {
        int temp = dequeArray[rear--];
        if (rear < 0) rear = maxSize - 1;
        return temp;
    }

    public boolean isEmpty() {
        return ((rear + 1 == front) || (front + maxSize - 1 == rear));
    }

    public void show() {
        System.out.print("Deque contents: ");
        if (isEmpty()) {
            System.out.println("Deque is empty");
            return;
        }
        int i = front;
        while (true) {
            System.out.print(dequeArray[i] + " ");
            if (i == rear) break;
            i = (i + 1) % maxSize;
        }
        System.out.println();
    }
}

public class laboratorna_5 {

    public static void queueProject(Scanner sc) {
        System.out.print("Enter number of elements for the queue: ");
        int n = sc.nextInt();
        Queue queue = new Queue(n + 10);
        Random rand = new Random();

        // Fill queue with random numbers
        for (int i = 0; i < n; i++) {
            int num = rand.nextInt(100);
            queue.insert(num);
        }

        queue.show();

        System.out.print("Enter number of elements to remove from queue: ");
        int removeCount = sc.nextInt();
        System.out.print("Removed elements: ");
        for (int i = 0; i < removeCount && !queue.isEmpty(); i++) {
            System.out.print(queue.remove() + " ");
        }
        System.out.println();

        queue.show();

        // Test clear()
        queue.clear();
        System.out.println("After clearing the queue:");
        queue.show();
    }

    public static void dequeProject(Scanner sc) {
        Deque deque = new Deque(10);

        deque.insertRight(10);
        deque.insertRight(20);
        deque.insertLeft(5);
        deque.insertLeft(2);

        deque.show();

        System.out.println("Removed from left: " + deque.removeLeft());
        System.out.println("Removed from right: " + deque.removeRight());

        deque.show();
    }

    public static void thirdLetterProject(Scanner sc) {
        System.out.print("Enter a string: ");
        sc.nextLine(); // clear buffer
        String input = sc.nextLine();
        Queue queue = new Queue(input.length());
        for (int i = 2; i < input.length(); i += 3) { // кожний третій символ
            queue.insert((int) input.charAt(i));
        }

        System.out.print("Third letters in queue: ");
        queue.show();
    }

    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);

        while (true) {
            System.out.println("\nChoose a project:");
            System.out.println("1 - Queue project");
            System.out.println("2 - Deque project");
            System.out.println("3 - ThirdLetter project");
            System.out.println("0 - Exit");
            System.out.print("Your choice: ");
            int choice = sc.nextInt();

            switch (choice) {
                case 1 -> queueProject(sc);
                case 2 -> dequeProject(sc);
                case 3 -> thirdLetterProject(sc);
                case 0 -> {
                    System.out.println("Exiting program...");
                    sc.close();
                    return;
                }
                default -> System.out.println("Invalid choice! Try again.");
            }
        }
    }
}
